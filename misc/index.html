<!DOCTYPE html>

<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"/>
    <style>
        .fs-hide {
            display: none;
        }

        .qr-code-title {
            margin: 15px;
        }

        #qrcode_text {
            margin: 15px;
            text-align: center;
        }

        #qrcode {
            width: 400px;
            height: 400px;
            margin: 15px;
            text-align: center;
        }
    </style>
    <title>You shall know the truth, and the truth shall make you free. 你们必晓得真理, 真理必叫你们得自由</title>
</head>
<body>
<h1 style="color: #4488ff;">Free Server is online :)</h1>
<p>You shall know the truth, and the truth shall make you free. 你们必晓得真理, 真理必叫你们得自由 <a
        href="http://cnbible.com/john/8-32.htm">John 8:32</a></p>
<hr/>

<div class="http2 fs-hide">
    <p class="tutorial-link">
        <a href="./tutorial/chrome-1.htm">Mac/Windows/Linux 设置教程</a>
    </p>
</div>

<div class="ssr fs-hide">
    <p class="tutorial-link">
        <a>iPhone / iPad 设置教程 (TBD)</a>
        <a>Android 安卓设置教程 (TBD)</a>
    </p>
    <p class="qr-code-title">
        Your SSR QR code:
    </p>
    <div id="qrcode_text">
        <a id="qrcode_link"></a>
    </div>
    <div id="qrcode">
    </div>

</div>

</body>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="qrcode.min.js"></script>
<script type="text/javascript">

    main();

    function makeCodeForSSR(pureString) {

        if (!pureString) {
            return
        }

        $('.ssr').removeClass('fs-hide');

        var targetDomNode = document.getElementById("qrcode");
        var targetLinkDomNode = document.getElementById("qrcode_link");

        var protocol = 'ssr://';

        var qrcode = new QRCode(targetDomNode, {
            width: 400,
            height: 400
        });

        var finalTextForQrCode = protocol + pureString;

        targetLinkDomNode.innerText = finalTextForQrCode;
        targetLinkDomNode.href = finalTextForQrCode;

        qrcode.makeCode(finalTextForQrCode);
    }

    function getTextFromHash() {
        return location.hash.replace(/^#/, '')
    }

    function showHttp2Tutorial() {
        $('.http2').removeClass('fs-hide');
    }

    function main() {
        var hash = getTextFromHash();

        if (!hash ) {
            return
        }

        if (hash.match(/^http2/)) {
            showHttp2Tutorial();
            return
        }

        makeCodeForSSR(hash)
    }

</script>
</html>
