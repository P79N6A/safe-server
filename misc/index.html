<!DOCTYPE html>

<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"/>
    <style>
        .fs-hide {
            display: none;
        }

        .qr-code-title {
            margin: 15px;
        }

        #qrcode_text {
            margin: 15px;
            text-align: center;
        }

        #qrcode {
            width: 400px;
            height: 400px;
            margin: 15px;
            text-align: center;
        }
    </style>
    <title>You shall know the truth, and the truth shall make you free. 你们必晓得真理, 真理必叫你们得自由</title>
</head>
<body>
<h1 style="color: #4488ff;">Free Server is online :)</h1>
<p>You shall know the truth, and the truth shall make you free. 你们必晓得真理, 真理必叫你们得自由 <a
        href="http://cnbible.com/john/8-32.htm">John 8:32</a></p>
<hr/>
<h1 class="fs-hide qr-code-title">
    Your SSR QR code:
</h1>
<div id="qrcode_text" class="fs-hide">
    <a id="qrcode_link"></a>
</div>
<div id="qrcode" class="fs-hide"></div>
</body>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="qrcode.min.js"></script>
<script type="text/javascript">

    generateQsCode();

    function makeCodeForSSR(pureString) {

        if (!pureString) {
            return
        }

        $('.fs-hide').removeClass('fs-hide');

        var targetDomNode = document.getElementById("qrcode");
        var targetLinkDomNode = document.getElementById("qrcode_link");

        var protocol = 'ssr://';

        var qrcode = new QRCode(targetDomNode, {
            width: 400,
            height: 400
        });

        var finalTextForQrCode = protocol + pureString;

        targetLinkDomNode.innerText = finalTextForQrCode;
        targetLinkDomNode.href = finalTextForQrCode;

        qrcode.makeCode(finalTextForQrCode);
    }

    function getTextFromHash() {
        return location.hash.replace(/^#/, '')
    }

    function generateQsCode() {

        var hash = getTextFromHash();

        if (!hash) {
            return
        }

        makeCodeForSSR(hash)
    }

</script>
</html>
